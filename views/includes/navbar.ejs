<nav
  class="navbar navbar-expand-md navbar-light bg-light border-bottom fixed-top"
>
  <a class="navbar-brand" href="/listings"
    ><i id="main-logo" class="fa-regular fa-compass"></i
  ></a>
  <button
    class="navbar-toggler"
    type="button"
    data-toggle="collapse"
    data-target="#navbarNav"
    aria-controls="navbarNav"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
  <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/listings"
          >Home <span class="sr-only"></span
        ></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/listings/new">New Listing</a>
      </li>
    </ul>
    <% if(showSearchBar) {%>
    <div class="search-bar mx-auto ">
      <form class="form-inline my-2 my-lg-0" method="get" action="/listings">
        <input class="form-control mr-sm-2 " id="search" name="search" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-danger my-2 my-sm-0 " id="nav-btn"  type="submit">Search</button>
      </form>
    </div>
    <% } %>
    <ul class="navbar-nav ml-auto">
      
      <% if(!currentUser){ %>
        <li class="nav-item">
          <a class="nav-link" href="/login">Login</a>
        </li> 
      <% } else { %>
        <li class="nav-item">
          <a class="nav-link" href="/listings">@<%= currentUser.username  %></a>
        </li>
      <li class="nav-item">
        <a class="nav-link" href="/logout">LogOut</a>
      </li>
      <% } %>
    </ul>
    
  </div>
</nav>
<script>

  // Get the current URL path
  const currentPath = window.location.pathname;

  // Get all nav links
  const navLinks = document.querySelectorAll(".navbar-nav .nav-link");

  // Loop through nav links and add 'active' class if href matches currentPath
  navLinks.forEach((link) => {

    if (link.getAttribute("href") === currentPath) {
      link.classList.add("active");
    }
  });
</script>
